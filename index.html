// Mobile menu toggle
const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
const navLinks = document.querySelector('.nav-links');

mobileMenuToggle.addEventListener('click', function() {
    navLinks.classList.toggle('active');
});

// Close mobile menu when clicking on a link
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', function() {
        navLinks.classList.remove('active');
    });
});

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const target = document.querySelector(targetId);
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Search functionality
function searchProducts() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const products = document.querySelectorAll('.product-card');
    const noResults = document.getElementById('noResults');
    let hasResults = false;
    
    products.forEach(product => {
        const title = product.querySelector('h3').textContent.toLowerCase();
        const description = product.querySelector('p').textContent.toLowerCase();
        
        if (title.includes(searchTerm) || description.includes(searchTerm)) {
            product.style.display = 'block';
            hasResults = true;
        } else {
            product.style.display = 'none';
        }
    });

    // Show/hide no results message
    noResults.style.display = hasResults || searchTerm === '' ? 'none' : 'block';
}

// Enhanced real-time search functionality
document.getElementById('searchInput').addEventListener('input', function() {
    searchProducts();
    
    // Reset filters when searching
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent.trim() === 'Hamısı') {
            btn.classList.add('active');
        }
    });
});

// Filter functionality
function filterProducts(category) {
    const products = document.querySelectorAll('.product-card');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const noResults = document.getElementById('noResults');
    
    // Update active filter button
    filterBtns.forEach(btn => btn.classList.remove('active'));
    
    // Find the clicked button and add active class
    const activeButton = Array.from(filterBtns).find(btn => {
        return (category === 'all' && btn.textContent.trim() === 'Hamısı') ||
               (category === 'wood' && btn.textContent.trim() === 'Taxta') ||
               (category === 'metal' && btn.textContent.trim() === 'Metal') ||
               (category === 'doors' && btn.textContent.trim() === 'Qapılar') ||
               (category === 'furniture' && btn.textContent.trim() === 'Mebel') ||
               (category === 'other' && btn.textContent.trim() === 'Digər');
    });
    
    if (activeButton) {
        activeButton.classList.add('active');
    }
    
    // Clear search input when filtering
    document.getElementById('searchInput').value = '';
    
    // Filter products
    let hasResults = false;
    products.forEach(product => {
        if (category === 'all' || product.dataset.category === category) {
            product.style.display = 'block';
            hasResults = true;
        } else {
            product.style.display = 'none';
        }
    });

    // Show/hide no results message
    noResults.style.display = hasResults || category === 'all' ? 'none' : 'block';
}

// Search on Enter key
document.getElementById('searchInput').addEventListener('keyup', function(event) {
    if (event.key === 'Enter') {
        searchProducts();
    }
});

// Initialize with all products shown
window.addEventListener('DOMContentLoaded', function() {
    filterProducts('all');
});